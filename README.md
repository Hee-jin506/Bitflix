# 👩‍💻 BITFLIX 🎬
영화 OTT 서비스

## 주요 기능

- 멤버의 취향 장르에 따라 달라지는 화면 제공
- 추천 시스템
- 인기순, 장르별 영화 필터링

# 일지

## 2020-09-18

### 기능 추가
- `loadMembers()` 작성: Member 데이터를 파일에서 불러오는 메서드를 작성하였다.


### Tree-shaking
전혀 사용하지 않은 필드와 메서드가 남아있어서 삭제하였다.
- `Member.AllMovieHandler` 필드 삭제
- `MovieHandler.add(String title)` 메서드 삭제

### Bug

- 한 회원이 본 영화가 다른 회원의 본 영화에도 반영이 되고, 보고싶은 영화가 두 번 출력된다.
- 문제가 되는 `CommandProcessor.saveMembers()` 메서드를 수정해야 한다.

data/member.csv
```
김하연,eungeun,1111,로맨스,다크나이트,라라랜드:캐롤:미드소마
최희진,eungeun2,1111,액션,다크나이트다크나이트,라라랜드:캐롤:미드소마
```

### 느낀점
- 희진: 일주일만 지나도 자신이 작성한 코드가 기억나지 않는다는 게 실감이 되었다.
- 하연: 문제가 되는 메서드가 어디서 어떻게 사용되고 있는 지 파악이 바로 안 되어서 찾느라 소비되는 시간이 많았다. 코드에 대한 이해가 더 필요하다.


## 2020-09-19

### debug
- `saveMembers()`: StringBuilder 변수를 초기화하지 않아서 전 멤버를 저장할 때 사용된 StringBuilder가 그대로 사용되었다. 
- 다른 프로세스에서 파일이 사용되었을 때 예외가 발생하였다. 한 쪽 프로세스에서 파일을 사용하고 있을 때 다른 프로세스에서 접근하지 못하기 때문에 발생한 예외이다.

### 기능 추가
- `Member.add()` 메서드 수정: 이미 있는 아이디를 입력하거나, 빈 문자열을 입력하면 다시 입력을 받도록 메서드를 수정하였다.

### 느낀점
- catch 문 안에 `e.getMessage()`를 출력하여 예외가 발생했을 때 문제의 원인을 정확히 알 수 있도록 하는 것이 좋다.
- `Member.add()`에서 사용자가 입력한 문자열이 이미 있는 아이디인지 여부를 검사해야 할 상황이 있었다. 그때 기존에 `findByID()`메서드를 사용하면 간단하게 해결될 문제였다. 그러나 어떤 메서드가 있는 지 제대로 파악하지 못했기 때문에 중복된 코드를 작성하려고 했다. 작성한 코드는 정확히 이해하고 있어야 함을 깨달았다.

## 2020-09-20

### debug
- `loadMembers()`, `saveMembers()`: 보고싶은 영화나 시청한 영화가 없는 회원을 로드하는 시점에서 예외가 발생한다. "IndexOutOfException"
- 이는 split(",") 메서드를 호출할 때, 나눠지는 String이 빈문자열이면 배열의 요소로 취급하지 않아 리턴되는 배열의 길이가 달라지는 것이 원인이었다.
- 저번에는 마지막 필드가 되는 시청한 영화가 없는 경우를 대비하여 if (values.length == 6) 조건문을 붙였으나, 이 대처법은 시청한 영화가 비어있는지, 보고싶은 영화가 비어있는 지 구별할 수 없기 때문에 불완전했다.
- 개선책
  - saveMembers(): 보고싶은 영화나, 시청한 영화가 없을 경우에는 각각 "" 대신, " "을 그 자리에 삽입한다.
  - loadMemebers(): split()이 리턴한 배열의 4번째, 5번째 인덱스에 해당하는 String이 " "이 아닐 경우에만 String -> toWatchList/watchedList 변환한다.
  - 이를 통해 split(",")이 리턴한 배열의 길이를 6개로 유지하면서 각각의 필드가 없을 때의 발생할 예외를 방지할 수 있다.
  
### 느낀점
- 프로그램을 실행할 때에는 정말 다양한 가능성이 존재하고, 디버그에는 끝이 없음을 알았다.
- split() 메서드가 빈문자열을 배열에 포함시키지 않음을 알았다. 메서드를 사용할 때에는 잘 알고 써야함을 깨달았다.

## 2020-09-21

### Refactoring

- CommandProcessor
  - saveMovies() : 메서드 추출 - Movie 클래스의 인스턴스 메서드 toCsvString 정의
  - loadMovies() : 메서드 추출 - Movie 클래스의 스태틱 메서드 valueOfCsv 정의
  - saveMembers() : 메서드 추출 - Member객체의 정보를 csv파일의 한 줄로 변환하는 Member 클래스의 인스턴스 메서드 toCsvString 정의
  - loadMembers() : 메서드 추출 - Member 클래스의 스태틱 메서드 valueOfCsv 정의
  - loggedOut() : 화면을 조합하는 코드를 추출하여 viewLoggedOutScreen() 스태틱 메서드를 정의했다.
  - loggedIn() : 화면을 조합하는 코드를 추출하여 viewLoggedInScreen() 스태틱 메서드를 정의했다.

- MovieHandler
  - list()에서 호출하던 Screen 클래스의 viewMovies() 메서드를 MovieHandler 안으로 넣었다.

### 느낀점

- 프로젝트의 전체적인 설계에서 어떤 것이 정답인지 아직은 잘 모르겠다. 조금 더 설계 기법에 지식이 생기면, 그 때 개선해보는 것도 나쁘지 않을 것 같다.
